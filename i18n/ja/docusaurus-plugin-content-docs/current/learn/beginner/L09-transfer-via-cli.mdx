---
sidebar_position: 9
title: "CLIで送金する"
description: "Sui CLIを使ってSUIトークンを送金する方法を学びます"
---

# CLIで送金する

このレッスンでは、Sui CLIを使って別のアドレスにSUIトークンを送金する方法を学びます。これはブロックチェーンの最も基本的な操作の一つです。コマンド1つで送金できるので、難しくありません！

:::tip なぜCLIでの送金を学ぶの？
ウォレットは使いやすいインターフェースを提供しますが、CLIでの送金を理解すると：
- スクリプトでトランザクションを自動化できる
- アプリケーションのテストやデバッグができる
- トランザクションの構造を深く理解できる
:::

---

## 前提条件

このレッスンを始める前に、以下が完了していることを確認してください：

- Sui CLIがインストール済み（`sui --version` で確認）— [L03: Sui CLIをインストール](/docs/getting-started/L03-install-sui-cli)
- CLIがDevnetに接続済み（`sui client active-env` が `devnet` を返す）— [L05: CLIをDevnetに接続](/docs/getting-started/L05-connect-cli-to-devnet)
- Faucetでテスト用SUIを取得済み（`sui client gas` で残高を確認）— [L06: テストトークンを取得する](/docs/getting-started/L06-get-test-tokens)

---

## 手順

### 1. 現在のアドレスと残高を確認する

まず、現在のアドレスとSUIの残高を確認しましょう。

```bash
# アクティブなアドレスを確認
sui client active-address
```

以下のようにアドレスが表示されます：
```
0x1234abcd...
```

次に残高を確認します：

```bash
# すべてのガスコインを一覧表示
sui client gas
```

以下のような出力が表示されます：
```
╭────────────────────────────────────────────────────────────────────┬────────────────────┬──────────────────╮
│ gasCoinId                                                          │ mistBalance (MIST) │ suiBalance (SUI) │
├────────────────────────────────────────────────────────────────────┼────────────────────┼──────────────────┤
│ 0xabcd1234...                                                      │ 1000000000         │ 1.00             │
╰────────────────────────────────────────────────────────────────────┴────────────────────┴──────────────────╯
```

:::info MISTとSUI
1 SUI = 1,000,000,000 MIST（10億MIST）です。MISTはSUIの最小単位で、ビットコインにおけるsatoshiのようなものです。
:::

### 2. 2つ目のアドレスを作成する（任意）

送金を練習するには、送金先のアドレスが必要です。以下のいずれかの方法があります：
- 友人のアドレスを使う
- 自分用に2つ目のアドレスを作成する

新しいアドレスを作成するには：

```bash
sui client new-address ed25519
```

以下のような出力が表示されます：
```
Created new keypair and saved it to keystore.
╭─────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Generated Address: 0x9876fedc...                                                                │
├─────────────────────────────────────────────────────────────────────────────────────────────────┤
│ Secret Recovery Phrase: word1 word2 word3 ...                                                   │
╰─────────────────────────────────────────────────────────────────────────────────────────────────╯
```

:::warning リカバリーフレーズを保存しましょう！
新しいアドレスを作成したら、リカバリーフレーズを安全な場所に保存してください。後でこのアドレスにアクセスするために必要になります。
:::

### 3. transfer-suiコマンドでSUIを送金する

それでは、SUIを送金しましょう！`<RECIPIENT_ADDRESS>` を送金先のアドレスに置き換えてください：

```bash
sui client transfer-sui \
  --to <RECIPIENT_ADDRESS> \
  --amount 100000000 \
  --gas-budget 10000000
```

:::info コマンドの解説
- `--to`: 送金先のアドレス（`<>` は付けずに実際のアドレスに置き換えてください）
- `--amount`: 送金額（MIST単位）（100000000 MIST = 0.1 SUI）
- `--gas-budget`: ガス代の**上限**（MIST単位）。実際に使った分だけ消費され、残りは戻ってきます（例：10000000 MIST = 0.01 SUI）
:::

コマンドを実行すると、以下のような詳細な出力が表示されます：

```
Transaction Digest: AbC123xYz...
╭─────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Transaction Data                                                                                │
├─────────────────────────────────────────────────────────────────────────────────────────────────┤
│ Sender: 0x1234abcd...                                                                           │
│ ...                                                                                             │
├─────────────────────────────────────────────────────────────────────────────────────────────────┤
│ Transaction Kind: Programmable                                                                  │
│ ...                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────╯
```

**Transaction Digest** がトランザクションの固有IDです。これをコピーしておきましょう！

### 4. トランザクションを確認する

トランザクションが成功したことを確認しましょう。

#### CLIで確認

CLIで直接トランザクションの詳細を表示できます：

```bash
sui client tx-block <TRANSACTION_DIGEST>
```

#### Explorerで確認

Suiscanでも確認できます：

1. [Suiscan (Devnet)](https://suiscan.xyz/?network=devnet) にアクセス
2. **Devnet** になっていることを確認
3. 検索ボックスにTransaction Digestを貼り付け
4. トランザクションが「Success」と表示されていることを確認

Explorerでのトランザクションの読み方について詳しくは、[L08: Explorerでトランザクションを読む](/docs/learn/beginner/L08-read-tx-in-explorer) を参照してください。

### 5. 残高の変化を確認する

最後に、両方のアドレスの残高を確認して送金を確認します：

```bash
# 送金元の残高を確認
sui client gas

# 送金先に切り替えて残高を確認（自分で作成した2つ目のアドレスの場合のみ）
sui client switch --address <RECIPIENT_ADDRESS>
sui client gas
```

:::warning switchできるのは自分のアドレスのみ
`sui client switch` は、自分のキーストアに秘密鍵があるアドレスにしか切り替えられません。友人のアドレスに送金した場合は、この手順はスキップしてください。
:::

:::tip 確認が終わったら元に戻しましょう
2つ目のアドレスに切り替えた場合は、今後のレッスンのためにメインのアドレスに戻しておきましょう：
```bash
sui client switch --address <YOUR_MAIN_ADDRESS>
```
:::

---

## 成功の確認

以下ができれば、このレッスンは完了です：

- [ ] `sui client transfer-sui` を正常に実行できた
- [ ] Transaction Digestを取得できた
- [ ] CLIまたはExplorerでトランザクションのステータスを確認できた
- [ ] 送金元と送金先の両方で残高の変化を確認できた

---

## よくあるトラブル

### "Insufficient gas" エラー

アカウントにガス代を支払うのに十分なSUIがありません。[Faucet](/docs/getting-started/L06-get-test-tokens)から追加のトークンを取得してください。

### "Invalid address" エラー

- 送金先アドレスが正しいか確認してください（`0x` で始まる必要があります）
- 余分なスペースや文字が含まれていないか確認してください

### トランザクションが "Failed" と表示される

- トランザクション詳細でエラーメッセージを確認してください
- よくある原因：残高不足、無効な送金先アドレス

---

## このレッスンでやったこと

- [x] CLIでアドレスと残高を確認する方法を学んだ
- [x] `transfer-sui` コマンドでSUIを送金する方法を学んだ
- [x] MISTとSUIの関係を理解した
- [x] CLIとExplorerでトランザクションを確認した
