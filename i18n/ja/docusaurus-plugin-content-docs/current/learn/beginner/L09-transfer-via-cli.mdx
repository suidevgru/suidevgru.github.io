---
sidebar_position: 9
title: "CLIで送金する"
description: "Sui CLIを使ってSUIトークンを送金する方法を学びます"
---

# CLIで送金する

このレッスンでは、Sui CLIを使って別のアドレスにSUIトークンを送金する方法を学びます。これはブロックチェーンの最も基本的な操作の一つです。コマンド1つで送金できるので、難しくありません！

:::tip なぜCLIでの送金を学ぶの？
ウォレットは使いやすいインターフェースを提供しますが、CLIでの送金を理解すると：
- スクリプトでトランザクションを自動化できる
- アプリケーションのテストやデバッグができる
- トランザクションの構造を深く理解できる
:::

---

## 前提条件

このレッスンを始める前に、以下が完了していることを確認してください：

- Sui CLIがインストール済み（`sui --version` で確認）— [L03: Sui CLIをインストール](/docs/getting-started/L03-install-sui-cli)
- CLIがDevnetに接続済み（`sui client active-env` が `devnet` を返す）— [L05: CLIをDevnetに接続](/docs/getting-started/L05-connect-cli-to-devnet)
- Faucetでテスト用SUIを取得済み（`sui client gas` で残高を確認）— [L06: テストトークンを取得する](/docs/getting-started/L06-get-test-tokens)

---

## 手順

### 1. 現在のアドレスと残高を確認する

まず、現在のアドレスとSUIの残高を確認しましょう。

```bash
# アクティブなアドレスを確認
sui client active-address
```

以下のようにアドレスが表示されます：
```
0x1234abcd...
```

次に残高を確認します：

```bash
# すべてのガスコインを一覧表示
sui client gas
```

以下のような出力が表示されます：
```
╭────────────────────────────────────────────────────────────────────┬────────────────────┬──────────────────╮
│ gasCoinId                                                          │ mistBalance (MIST) │ suiBalance (SUI) │
├────────────────────────────────────────────────────────────────────┼────────────────────┼──────────────────┤
│ 0xabcd1234...                                                      │ 1000000000         │ 1.00             │
╰────────────────────────────────────────────────────────────────────┴────────────────────┴──────────────────╯
```

:::info MISTとSUI
1 SUI = 1,000,000,000 MIST（10億MIST）です。MISTはSUIの最小単位で、ビットコインにおけるsatoshiのようなものです。
:::

### 2. 送金先のアドレスを確認する

送金先として、[L01](/docs/getting-started/L01-install-slush) で作成したSlushウォレットのアドレスを使います。

CLIのアドレス（[L05](/docs/getting-started/L05-connect-cli-to-devnet) で生成）とSlushで最初に作成したアドレスは**別のアドレス**です。今回はCLIアドレスからSlushウォレットアドレスへSUIを送金します。

**Slushウォレットのアドレスを確認する方法：**

1. ブラウザ拡張機能のSlushを開く
2. L01で作成したアカウントに切り替える（L05でインポートしたCLIアカウントではない方）
3. アドレス（`0x...`）をコピーする

:::tip アドレスの見分け方
Slushに複数のアカウントがある場合、右下のユーザーアイコンからアカウントを切り替えられます。L06でFaucetからSUIを受け取ったアカウント（CLIアドレス）は残高がありますが、L01で最初に作ったアカウントは残高が0のはずです。
:::

### 3. transfer-suiコマンドでSUIを送金する

それでは、SUIを送金しましょう！`<RECIPIENT_ADDRESS>` を送金先のアドレスに置き換えてください：

```bash
sui client transfer-sui \
  --to <RECIPIENT_ADDRESS> \
  --amount 100000000 \
  --gas-budget 10000000
```

:::info コマンドの解説
- `--to`: 送金先のアドレス（`<>` は付けずに実際のアドレスに置き換えてください）
- `--amount`: 送金額（MIST単位）（100000000 MIST = 0.1 SUI）
- `--gas-budget`: ガス代の**上限**（MIST単位）。実際に使った分だけ消費され、残りは戻ってきます（例：10000000 MIST = 0.01 SUI）
:::

コマンドを実行すると、以下のような詳細な出力が表示されます：

```
Transaction Digest: AbC123xYz...
╭─────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Transaction Data                                                                                │
├─────────────────────────────────────────────────────────────────────────────────────────────────┤
│ Sender: 0x1234abcd...                                                                           │
│ ...                                                                                             │
├─────────────────────────────────────────────────────────────────────────────────────────────────┤
│ Transaction Kind: Programmable                                                                  │
│ ...                                                                                             │
╰─────────────────────────────────────────────────────────────────────────────────────────────────╯
```

**Transaction Digest** がトランザクションの固有IDです。これをコピーしておきましょう！

### 4. トランザクションを確認する

トランザクションが成功したことを確認しましょう。

#### CLIで確認

CLIで直接トランザクションの詳細を表示できます：

```bash
sui client tx-block <TRANSACTION_DIGEST>
```

#### Explorerで確認

Suiscanでも確認できます：

1. [Suiscan (Devnet)](https://suiscan.xyz/?network=devnet) にアクセス
2. **Devnet** になっていることを確認
3. 検索ボックスにTransaction Digestを貼り付け
4. トランザクションが「Success」と表示されていることを確認

Explorerでのトランザクションの読み方について詳しくは、[L08: Explorerでトランザクションを読む](/docs/learn/beginner/L08-read-tx-in-explorer) を参照してください。

### 5. 残高の変化を確認する

最後に、両方のアドレスの残高を確認して送金を確認します。

**CLIアドレス（送金元）の残高：**

```bash
sui client gas
```

送金前よりも残高が減っていることを確認しましょう（送金額 + ガス代の分だけ減ります）。

**Slushウォレットアドレス（送金先）の残高：**

Slushを開いて、L01で作成したアカウントに切り替えると、送金したSUIが反映されているはずです。

:::tip 反映に少し時間がかかる場合があります
Devnetでは通常数秒で反映されますが、まれに少し時間がかかることがあります。Slushの画面をリロードしてみてください。
:::

---

## 成功の確認

以下ができれば、このレッスンは完了です：

- [ ] `sui client transfer-sui` を正常に実行できた
- [ ] Transaction Digestを取得できた
- [ ] CLIまたはExplorerでトランザクションのステータスを確認できた
- [ ] 送金元と送金先の両方で残高の変化を確認できた

---

## よくあるトラブル

### "Insufficient gas" エラー

アカウントにガス代を支払うのに十分なSUIがありません。[Faucet](/docs/getting-started/L06-get-test-tokens)から追加のトークンを取得してください。

### "Invalid address" エラー

- 送金先アドレスが正しいか確認してください（`0x` で始まる必要があります）
- 余分なスペースや文字が含まれていないか確認してください

### トランザクションが "Failed" と表示される

- トランザクション詳細でエラーメッセージを確認してください
- よくある原因：残高不足、無効な送金先アドレス

---

## このレッスンでやったこと

- [x] CLIでアドレスと残高を確認する方法を学んだ
- [x] `transfer-sui` コマンドでSUIを送金する方法を学んだ
- [x] MISTとSUIの関係を理解した
- [x] CLIとExplorerでトランザクションを確認した
